{% extends "agency_detail.html" %}

{% block census-display %}{% endblock census-display %}

{% block stop-display %}
<!-- stop data -->
<div class="row">
  <div class="col-md-12">
    <h2 id="stop-percentage">Stops data</h2>
  </div>

  <div class="col-md-4">
    <h3>Stops by ethnicity</h3>

    <div>
      <svg id="stop_race_pie"></svg>
    </div>

    <p class="help-block">
      This graph reflects the ethnic composition of drivers stopped by law
      enforcement officers in the jurisdiction since the department began
      reporting its data to the MD state government. Adjusting the drop
      down menu will display the ethnic breakdown of stops on a year-by-year
      basis.
    </p>
  </div>

  <div id="stop_div" class="col-md-8">
    <h3>Annual percent of stops by ethnicity</h3>

    <div role="tabpanel">

      <!-- Nav tabs -->
      <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active">
          <a href="#stop_race_line_div" aria-controls="stop_race_line_div" role="tab" data-toggle="tab">Chart</a></li>
        <li role="presentation">
          <a href="#stop_race_data" aria-controls="stop_race_data" role="tab" data-toggle="tab">Data</a></li>
      </ul>

      <!-- Tab panes -->
      <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="stop_race_line_div">
          <svg id="stop_race_line"></svg>
        </div>
        <div role="tabpanel" class="tab-pane" id="stop_race_data">
        </div>
      </div>

    </div>

    <p class="help-block">
      This graph is a longitudinal representation of the ethnic
      composition of drivers stopped by the department since it began
      reporting its data to the MD state government. Drag the cursor
      over the graph to see the ethnic breakdown for any given year.
      <br><br>
      Click the "Data" tab to review the actual raw counts from the
      MD state government.
    </p>

  </div>
</div>
{% endblock stop-display %}

{% block search-rate-display %}{% endblock search-rate-display %}
{% block search-display %}{% endblock search-display %}
{% block lsb-display %}{% endblock lsb-display %}
{% block contraband-display %}{% endblock contraband-display %}
{% block use-of-force-display %}{% endblock use-of-force-display %}

{% block graph-code %}
{% comment %}<script>{% endcomment %}

{% if officer_id %}
  var stop_handler = new MD.StopsHandler({url: "{% url 'md:agency-api-stops' object.pk %}?officer={{officer_id|urlencode}}"});
{% else %}
  var stop_handler = new MD.StopsHandler({url: "{% url 'md:agency-api-stops' object.pk %}"});
{% endif %}

new MD.StopRatioDonut({handler: stop_handler, selector: "#stop_race_pie"});
new MD.StopRatioTimeSeries({handler: stop_handler, selector: "#stop_race_line"});
new MD.StopsTable({handler: stop_handler, selector: "#stop_race_data"});

{% comment %}</script>{% endcomment %}
{% endblock graph-code %}
