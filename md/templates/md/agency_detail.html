{% extends "agency_detail.html" %}

{% block census-display %}{% endblock census-display %}

{% block stop-display %}
<!-- stop data -->
<div class="row">
  <div class="col-md-12">
    <h2 id="stop-percentage">Stops data</h2>
  </div>

  <div class="col-md-4">
    <h3>Stops by ethnicity</h3>

    <div>
      <svg id="stop_race_pie"></svg>
    </div>

    <p class="help-block">
      This graph reflects the ethnic composition of drivers stopped by law
      enforcement officers in the jurisdiction since the department began
      reporting its data to the MD state government. Adjusting the drop
      down menu will display the ethnic breakdown of stops on a year-by-year
      basis.
    </p>
  </div>

  <div id="stop_div" class="col-md-8">
    <h3>Annual percent of stops by ethnicity</h3>

    <div role="tabpanel">

      <!-- Nav tabs -->
      <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active">
          <a href="#stop_race_line_div" aria-controls="stop_race_line_div" role="tab" data-toggle="tab">Chart</a></li>
        <li role="presentation">
          <a href="#stop_race_data" aria-controls="stop_race_data" role="tab" data-toggle="tab">Data</a></li>
      </ul>

      <!-- Tab panes -->
      <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="stop_race_line_div">
          <svg id="stop_race_line"></svg>
        </div>
        <div role="tabpanel" class="tab-pane" id="stop_race_data">
        </div>
      </div>

    </div>

    <p class="help-block">
      This graph is a longitudinal representation of the ethnic
      composition of drivers stopped by the department since it began
      reporting its data to the MD state government. Drag the cursor
      over the graph to see the ethnic breakdown for any given year.
      <br><br>
      Click the "Data" tab to review the actual raw counts from the
      MD state government.
    </p>

  </div>
</div>
{% endblock stop-display %}

{% block search-rate-display %}{% endblock search-rate-display %}

{% block search-display %}
<div class="row">
  <div class="col-md-12">
    <h2>Search data</h2>
  </div>

  <div class="col-md-4">
    <h3>Search by ethnicity</h3>

    <div>
      <svg id="search_race_pie"></svg>
    </div>

    <p class="help-block">
      This graph reflects the ethnic composition of drivers searched by law
      enforcement officers in the jurisdiction since the department began
      reporting its data to the MD Department of Justice. Adjusting the drop
      down menu will display the ethnic breakdown of stops on a year-by-year
      basis.
    </p>
  </div>

  <div id="search_div" class="col-md-8">
    <h3>Annual percent of search by ethnicity</h3>

    <div role="tabpanel">

      <!-- Nav tabs -->
      <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active">
          <a href="#search_race_line_div" aria-controls="search_race_line_div" role="tab" data-toggle="tab">Chart</a></li>
        <li role="presentation">
          <a href="#search_race_data" aria-controls="stop_race_data" role="tab" data-toggle="tab">Data</a></li>
      </ul>

      <!-- Tab panes -->
      <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="search_race_line_div">
          <svg id="search_race_line"></svg>
        </div>
        <div role="tabpanel" class="tab-pane" id="search_race_data">
        </div>
      </div>

      <p class="help-block">
        This graph is a longitudinal representation of the ethnic
        composition of drivers searched by the department since it began
        reporting its data to the MD Department of Justice. Drag the cursor
        over the graph to see the ethnic breakdown for any given year.
        <br><br>
        Click the "Data" tab to review the actual raw counts from the
        MD Department of Justice.
      </p>

    </div>

  </div>
</div>
{% endblock search-display %}

{% block lsb-display %}
  <div class="row">
    <div id="lhs_div" class="col-md-offset-2 col-md-8">
      <h3>Likelihood of search by stop-cause</h3>

      <div role="tabpanel">

        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
          <li role="presentation" class="active">
            <a href="#lsb_div" aria-controls="lsb_div" role="tab" data-toggle="tab">Chart</a></li>
          <li role="presentation">
            <a href="#lsb_data" aria-controls="lsb_data" role="tab" data-toggle="tab">Data</a></li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">
          <div role="tabpanel" class="tab-pane active" id="lsb_div">
            <svg id="lsb"></svg>
          </div>
          <div role="tabpanel" class="tab-pane" id="lsb_data">
          </div>
        </div>

      </div>

      <p class="help-block">
        This chart displays the relative statistical likelihood of one
        ethnic group being searched as compared to another group for a
        given stop cause. Adjusting the drop down menu will display the relative
        likelihood of search relative to another ethnic group on a year-by-year
        basis. Click the colored circles above the graph to display the
        comparisons between various ethnic groups.
        <br><br>
        Click the "Data" tab to review the actual raw counts from the
        MD Department of Justice.
      </p>

    </div>
  </div>
{% endblock lsb-display %}

{% block contraband-display %}
  <div class="row">
    <div id="contraband_div" class="col-md-offset-2 col-md-8">
      <h3>Contraband hit-rate</h3>

      <div role="tabpanel">

        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
          <li role="presentation" class="active">
            <a href="#chr_div" aria-controls="chr_div" role="tab" data-toggle="tab">Chart</a></li>
          <li role="presentation">
            <a href="#chr_data" aria-controls="chr_data" role="tab" data-toggle="tab">Data</a></li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">
          <div role="tabpanel" class="tab-pane active" id="chr_div">
            <svg id="chr"></svg>
          </div>
          <div role="tabpanel" class="tab-pane" id="chr_data">
          </div>
        </div>

      </div>

      <p class="help-block">
        This chart displays the percentage of searches that uncovered contraband
        for a given racial or ethnic group. Adjusting the drop down menu will
        display the hit rate on a year-by-year basis.
        <br><br>
        Click the "Data" tab to review the actual raw counts from the
        NC Department of Justice.
      </p>

    </div>
  </div>
{% endblock contraband-display %}

{% block use-of-force-display %}{% endblock use-of-force-display %}

{% block graph-code %}
{% comment %}<script>{% endcomment %}

{% if officer_id %}
  var stop_handler = new MD.StopsHandler({url: "{% url 'md:agency-api-stops' object.pk %}?officer={{officer_id|urlencode}}"});
  var search_handler = new MD.SearchHandler({url: "{% url 'md:agency-api-searches' object.pk %}?officer={{officer_id|urlencode}}"});
  var lhs_handler = new MD.LikelihoodSearchHandler({url: "{% url 'md:agency-api-stops-by-reason' object.pk %}?officer={{officer_id|urlencode}}"});
  var chr_handler = new MD.ContrabandHitRateHandler({url: "{% url 'md:agency-api-contraband-hit-rate' object.pk %}?officer={{officer_id|urlencode}}"});
{% else %}
  var stop_handler = new MD.StopsHandler({url: "{% url 'md:agency-api-stops' object.pk %}"});
  var search_handler = new MD.SearchHandler({url: "{% url 'md:agency-api-searches' object.pk %}"});
  var lhs_handler = new MD.LikelihoodSearchHandler({url: "{% url 'md:agency-api-stops-by-reason' object.pk %}"});
  var chr_handler = new MD.ContrabandHitRateHandler({url: "{% url 'md:agency-api-contraband-hit-rate' object.pk %}"});
{% endif %}

new MD.StopRatioDonut({handler: stop_handler, selector: "#stop_race_pie"});
new MD.StopRatioTimeSeries({handler: stop_handler, selector: "#stop_race_line"});
new MD.StopsTable({handler: stop_handler, selector: "#stop_race_data"});

new MD.SearchRatioDonut({handler: search_handler, selector: "#search_race_pie"});
new MD.SearchRatioTimeSeries({handler: search_handler, selector: "#search_race_line"});
new MD.SearchTable({handler: search_handler, selector: "#search_race_data"});

new MD.LikelihoodOfSearch({handler: lhs_handler, selector: "#lsb"});
new MD.LikelihoodSearchTable({handler: lhs_handler, selector: "#lsb_data"});

new MD.ContrabandHitRateBar({handler: chr_handler, selector: "#chr"});
new MD.ContrabandTable({handler: chr_handler, selector: "#chr_data"});

{% comment %}</script>{% endcomment %}
{% endblock graph-code %}
